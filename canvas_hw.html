<!DOCTYPE html>
<html lang='en'>
<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Canvas HW</title>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
   <body onload="func()">
     <canvas id="mycanvas" width="800" height="500">

     </canvas>

   <script type="text/javascript">

   canvas = document.getElementById('mycanvas');
   ctx = canvas.getContext("2d");


   var flag = false;
   var prevX = 0;
   var currX = 0;
   var prevY = 0;
   var currY = 0;
   var dot_flag = false;

   var col = 'black';
   var wid = 5;
   //


   document.addEventListener('keyup', color);
   function color(event) {
     var ev = event.which || event.keyCode;
     if (ev == 66) {
        col ='blue';
     }
      if (ev == 82){
        col='red'
      }
      if (ev == 70){
        col='green'
      }
      if (ev == 89){
        col='yellow'
      }
    }

    document.addEventListener('keyup', width);
    function width(event){
      var ev = event.which || event.keyCode;
      if (ev == 38){
        wid += 1
      }
      if (ev == 40){
        wid  = wid-1
      }
    }

   function func() {
       w = canvas.width;
       h = canvas.height;

       canvas.addEventListener("mousemove", function (mouse) {
           findxy('move', mouse)
       }, false);
       canvas.addEventListener("mousedown", function (mouse) {
           findxy('down', mouse)
       }, false);
       canvas.addEventListener("mouseup", function (mouse) {
           findxy('up', mouse)
       }, false);
       canvas.addEventListener("mouseout", function (mouse) {
           findxy('out', mouse)
       }, false);
   }

   document.addEventListener('keyup', clear);
   function clear(event){
     var ev = event.which || event.keyCode;
     if (ev ==32){
       ctx.clearRect(0,0,800,500)
     }
   }
   function draw() {
       // var mouseX= event.clientX;
       // var mouseY = event.clientY;
       // ctx.ellipse(mouseX, mouseY, wid, wid);

       ctx.beginPath();
       ctx.moveTo(prevX, prevY);
       ctx.lineTo(currX, currY);
       ctx.strokeStyle = col;
       ctx.lineWidth = wid;
       ctx.stroke();
       ctx.closePath();

   }


   function findxy(click, mouse) {
       if ( click=='up') {
           prevX = currX;
           prevY = currY;
           currX = mouse.clientX - canvas.offsetLeft;
           currY = mouse.clientY - canvas.offsetTop;

           flag = true;
           dot_flag = true;

           if (dot_flag) {
               ctx.beginPath();
               ctx.fillStyle = col;
               ctx.fillRect(currX, currY, 2, 2);
               ctx.closePath();
               dot_flag = false;
           }
       }
       if (click == 'down' || click == "out" ) {
           flag = false;
       }
       if (click == 'move') {
           if (flag) {
               prevX = currX;
               prevY = currY;
               currX = mouse.clientX - canvas.offsetLeft;
               currY = mouse.clientY - canvas.offsetTop;
               draw();
           }
       }
   }
   </script>

   </body>
   </html>
